<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><title>Clirr Core - Clirr Ant Task</title><style type="text/css" media="all">
          @import url("./style/maven-base.css");
          
			    @import url("./style/maven-theme.css");</style><link rel="stylesheet" href="./style/print.css" type="text/css" media="print"></link><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta><meta name="author" content="Lars Kühne"></meta><meta name="email"></meta></head><body class="composite"><div id="banner"><a href="http://clirr.sourceforge.net/" id="projectLogo"><img alt="Clirr Core" src="./images/clirr.png"></img></a><div class="clear"><hr></hr></div></div><div id="breadcrumbs"><div class="xleft">
                	Last published: 27 September 2005
                  | Doc for 0.6</div><div class="xright">
        
        <a href="http://sourceforge.net/projects/clirr" class="externalLink" title="External Link">SourceForge Project Page</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="http://sourceforge.net/" class="externalLink" title="External Link">Hosted by SourceForge</a>
      </div><div class="clear"><hr></hr></div></div><div id="leftColumn"><div id="navcolumn"><div id="menuClirr_Core"><h5>Clirr Core</h5><ul><li class="none"><a href="index.html">Overview</a></li><li class="expanded"><a href="">Running Clirr</a><ul><li class="none"><strong><a href="anttask.html">From Ant</a></strong></li><li class="none"><a href="runcli.html">From a command-line</a></li></ul></li><li class="none"><a href="exegesis.html">Message Explanations</a></li></ul></div><div id="menuProject_Documentation"><h5>Project Documentation</h5><ul><li class="none"><a href="index.html">About Clirr Core</a></li><li class="collapsed"><a href="project-info.html">Project Info</a></li><li class="collapsed"><a href="maven-reports.html">Project Reports</a></li></ul></div></div></div><div id="bodyColumn"><div class="contentBox"><div class="section"><a name="Running_Clirr_as_an_Ant_Task"></a><h2>Running Clirr as an Ant Task</h2><p>
        The clirr-core module contains an
                <a href="http://ant.apache.org" class="externalLink" title="External Link">Ant</a> task.
        The following text assumes that you are familiar with Ant. To run clirr, you typically
            </p><ul>
                <li>compile the current version of the library you want to check, resulting in one or more jar file</li>
                <li>tell ant about the clirr ant task</li>
                <li>download the compatibility baseline release of your software from a central location via http
        (if it is not available in your local filesystem already)</li>
                <li>run the clirr task</li>
            </ul><p>
        To do this you will need an ant snippet similar to the following:
            </p>
    <div class="source"><pre>
&lt;target name="checkbinarycompatibility" depends="build"&gt;

  &lt;!-- buildtools.classpath should either contain
        clirr-core-uber.jar or alternatively
        clirr-core.jar and the libraries it depends on --&gt;

  &lt;taskdef
        classpathref="buildtools.classpath"
        resource="clirrtask.properties"/&gt;

  &lt;property
        name="jar.baseline"
        value="${ant.project.name}-${compatibility.baseline.version}.jar"/&gt;

  &lt;get
        src="${url.libbase}/${ant.project.name}/${jar.baseline}"
        dest="build/tmp/${jar.baseline}"/&gt;

  &lt;clirr&gt;
        &lt;origfiles dir="build/tmp" includes="${jar.baseline}"/&gt;
        &lt;newfiles dir="build/lib" includes="${jar.buildresult}"/&gt;

        &lt;!-- &lt;formatter type="xml" outfile="build/clirr.xml" /&gt; --&gt;
        &lt;!-- TODO: example for 3rd party classpath --&gt;
  &lt;/clirr&gt;

&lt;/target&gt;
            </pre></div>
  </div><div class="section"><a name="Parameters"></a><h2>Parameters</h2><table class="bodyTable"><tr class="a"><td>Attribute</td><td>Description</td><td>Required</td><td>Default</td></tr><tr class="b"><td>failOnBinWarning</td><td>Whether task execution should fail (break the build) on warnings
                        about binary compatibility issues</td><td>No</td><td>No</td></tr><tr class="a"><td>failOnBinError</td><td>Whether task execution should fail (break the build) on binary
                        compatibility errors</td><td>No</td><td>Yes</td></tr><tr class="b"><td>failOnSrcWarning</td><td>Whether task execution should fail (break the build) on warnings
                        about source code compatibility issues</td><td>No</td><td>No</td></tr><tr class="a"><td>failOnSrcError</td><td>Whether task execution should fail (break the build) on source
                        compatibility errors</td><td>No</td><td>Yes</td></tr></table></div><div class="section"><a name="Parameters_specified_as_nested_elements"></a><h2>Parameters specified as nested elements</h2><div class="section"><a name="newFiles"></a><h2>newFiles</h2><p>
        A
                    <a href="http://ant.apache.org/manual/CoreTypes/fileset.html" class="externalLink" title="External Link">FileSet</a>
        that describes the current version that should be checked against
        the compatibility baseline.
                </p><p>
        Clirr works with FileSets instead of individual jar files to allow
        splitting up or combining library distributions. An example is log4j,
        presumably the 1.3.0 release will split up the earlier log4j.jar
        into several jar files.
                </p></div><div class="section"><a name="origFiles"></a><h2>origFiles</h2><p>
        A
                    <a href="http://ant.apache.org/manual/CoreTypes/fileset.html" class="externalLink" title="External Link">FileSet</a>
        that describes the compatibility baseline to check against.
                </p></div><div class="section"><a name="newClassPath"></a><h2>newClassPath</h2><p>
        The 3rd party
                    <a href="http://ant.apache.org/manual/using.html#path" class="externalLink" title="External Link">ClassPath</a>
        that is referenced by the checked library version (newFiles). Any
        class or interface that occurs as a baseclass, parameter type or method return type
        must be included here.
                </p></div><div class="section"><a name="origClassPath"></a><h2>origClassPath</h2><p>
        The 3rd party
                    <a href="http://ant.apache.org/manual/using.html#path" class="externalLink" title="External Link">ClassPath</a>
        that is referenced by the compatibility baseline version (origFiles). Any
        class or interface that occurs as a baseclass, parameter type or method return type
        must be included here.
                </p><p>
        Often the origClassPath is the same as the newClassPath.
        In these cases you can specify these paths using the refid attribute to avoid
        duplicating the classpath information. Please refer to the
                    <a href="http://ant.apache.org/manual/using.html#path" class="externalLink" title="External Link">ant manual</a>
        for details.
                </p></div><div class="section"><a name="formatter"></a><h2>formatter</h2><p>
        A formatter that generates Clirr output. Multiple formatters can be specified.
        Available attributes for each formatter element:
                </p><table class="bodyTable"><tr class="b"><td>Attribute</td><td>Description</td><td>Required</td><td>Default</td></tr><tr class="a"><td>type</td><td>The formatter type. Available types are <em>plain</em> and <em>xml</em></td><td>No</td><td>plain</td></tr><tr class="b"><td>outfile</td><td>The file to write to. If not specified, output is written to stdout</td><td>No</td><td>stdout</td></tr></table></div><p>
                If no formatter is specified, Clirr will write it's findings to stdout in plain format.
            </p></div><div class="section"><a name="apiclasses"></a><h2>apiclasses</h2><p>
    A
                <a href="http://ant.apache.org/manual/CoreTypes/patternset.html" class="externalLink" title="External Link">PatternSet</a>
    that defines which classes form the API. By default all classes are included.
            </p><p>
    The API is often only a subset from the set of public classes in a jar file. For example,
    the Eclipse project has
    <a href="http://www.eclipse.org/articles/Article-API%20use/eclipse-api-usage-rules.html" class="externalLink" title="External Link">package
        naming conventions</a> that signal which classes must not
    be used outside a module, even though they are technically public.
            </p><p>
    Example:
            </p>
    <div class="source"><pre>
  &lt;clirr&gt;
        &lt;origfiles dir="build/tmp" includes="${jar.baseline}"/&gt;
        &lt;newfiles dir="build/lib" includes="${jar.buildresult}"/&gt;
        &lt;apiclasses&gt;
              &lt;exclude name="**/internal/**"/&gt;
              &lt;exclude name="**/examples/**"/&gt;
              &lt;exclude name="**/tests/**"/&gt;
        &lt;/apiclasses&gt;
  &lt;/clirr&gt;
            </pre></div>
  </div></div></div><div class="clear"><hr></hr></div><div id="footer"><div class="xleft"><a href="http://sourceforge.net" class="externalLink" title="External Link">
                <img src="http://sourceforge.net/sflogo.php?group_id=89627&amp;type=1" border="0" alt="sourceforge"></img>
            </a></div><div class="xright">© 2003-2005, Lars Kühne</div><div class="clear"><hr></hr></div></div></body></html>